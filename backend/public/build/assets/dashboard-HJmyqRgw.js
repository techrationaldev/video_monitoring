import{c as H,a as A,j as t,H as J,L as P}from"./app-DSV_lNiS.js";import{U as T,A as F}from"./app-layout-DoIPqUQ8.js";import{d as B}from"./index-C4J_hXM0.js";import{RoomMonitor as G}from"./room-monitor-BjTbO9e6.js";import{c as W}from"./createLucideIcon-DE8OeGb7.js";import{A as K}from"./index-CvDqwwhg.js";/* empty css            */import"./app-logo-icon-FZG8B_pD.js";import"./index-jQ4K8GU1.js";import"./index-DHvpKhRR.js";import"./settings-TeH3m9f-.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]],C=W("MonitorPlay",Q);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Y=W("Server",X),Z=[{title:"Dashboard",href:B().url}];function he(s){const e=H.c(37),{rooms:u}=s;let b;e[0]!==u?(b=u===void 0?[]:u,e[0]=u,e[1]=b):b=e[1];const $=b,[l,U]=A.useState($),[h,I]=A.useState(!1),[L,V]=A.useState(0);let g,j;e[2]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{const q="wss://eyeserver.mytro.in",f=new WebSocket(q);return f.onopen=()=>{console.log("Connected to Mediasoup for Dashboard updates"),I(!0);const R={action:"join-as-admin",roomId:"admin-dashboard"};f.send(JSON.stringify(R))},f.onmessage=R=>{try{const p=JSON.parse(R.data);if(p.action==="active-rooms"){U(p.data);const O=p.data.reduce(te,0);V(O)}}catch(p){console.error("Error parsing WS message:",p)}},f.onclose=()=>{console.log("Disconnected from Mediasoup"),I(!1)},()=>{f.close()}},j=[],e[2]=g,e[3]=j):(g=e[2],j=e[3]),A.useEffect(g,j);let y;e[4]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsx(J,{title:"Dashboard"}),e[4]=y):y=e[4];let v,N;e[5]===Symbol.for("react.memo_cache_sentinel")?(v=t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-blue-500/10 text-blue-500",children:t.jsx(C,{className:"h-6 w-6"})}),N=t.jsx("p",{className:"text-sm font-medium text-zinc-400",children:"Active Streams"}),e[5]=v,e[6]=N):(v=e[5],N=e[6]);let r;e[7]!==l.length?(r=t.jsx("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900/50 p-4 shadow-sm backdrop-blur-xl",children:t.jsxs("div",{className:"flex items-center gap-4",children:[v,t.jsxs("div",{children:[N,t.jsx("h3",{className:"text-2xl font-bold text-white",children:l.length})]})]})}),e[7]=l.length,e[8]=r):r=e[8];let w,z;e[9]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-purple-500/10 text-purple-500",children:t.jsx(T,{className:"h-6 w-6"})}),w=t.jsx("p",{className:"text-sm font-medium text-zinc-400",children:"Total Viewers"}),e[9]=w,e[10]=z):(w=e[9],z=e[10]);let i;e[11]!==L?(i=t.jsx("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900/50 p-4 shadow-sm backdrop-blur-xl",children:t.jsxs("div",{className:"flex items-center gap-4",children:[z,t.jsxs("div",{children:[w,t.jsx("h3",{className:"text-2xl font-bold text-white",children:L})]})]})}),e[11]=L,e[12]=i):i=e[12];const D=`flex h-12 w-12 items-center justify-center rounded-lg ${h?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"}`;let _;e[13]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx(Y,{className:"h-6 w-6"}),e[13]=_):_=e[13];let o;e[14]!==D?(o=t.jsx("div",{className:D,children:_}),e[14]=D,e[15]=o):o=e[15];let S;e[16]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsx("p",{className:"text-sm font-medium text-zinc-400",children:"System Status"}),e[16]=S):S=e[16];const E=h?"Online":"Offline";let a;e[17]!==E?(a=t.jsx("h3",{className:"text-2xl font-bold text-white",children:E}),e[17]=E,e[18]=a):a=e[18];let c;e[19]!==h?(c=h&&t.jsxs("span",{className:"relative flex h-2.5 w-2.5",children:[t.jsx("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-green-400 opacity-75"}),t.jsx("span",{className:"relative inline-flex h-2.5 w-2.5 rounded-full bg-green-500"})]}),e[19]=h,e[20]=c):c=e[20];let n;e[21]!==a||e[22]!==c?(n=t.jsxs("div",{children:[S,t.jsxs("div",{className:"flex items-center gap-2",children:[a,c]})]}),e[21]=a,e[22]=c,e[23]=n):n=e[23];let d;e[24]!==o||e[25]!==n?(d=t.jsx("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900/50 p-4 shadow-sm backdrop-blur-xl",children:t.jsxs("div",{className:"flex items-center gap-4",children:[o,n]})}),e[24]=o,e[25]=n,e[26]=d):d=e[26];let m;e[27]!==i||e[28]!==d||e[29]!==r?(m=t.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r,i,d]}),e[27]=i,e[28]=d,e[29]=r,e[30]=m):m=e[30];let k;e[31]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-white",children:[t.jsx(K,{className:"h-5 w-5 text-blue-500"}),"Live Feeds"]}),t.jsx("span",{className:"text-sm text-zinc-500",children:"Auto-refreshing"})]}),e[31]=k):k=e[31];let x;e[32]!==l?(x=t.jsxs("div",{children:[k,l.length===0?t.jsxs("div",{className:"flex h-64 flex-col items-center justify-center rounded-xl border border-dashed border-zinc-800 bg-zinc-900/30 text-zinc-500",children:[t.jsx(C,{className:"mb-4 h-12 w-12 opacity-20"}),t.jsx("p",{children:"No active streams detected"}),t.jsx("p",{className:"text-sm",children:"Waiting for clients to connect..."})]}):t.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:l.map(ee)})]}),e[32]=l,e[33]=x):x=e[33];let M;return e[34]!==m||e[35]!==x?(M=t.jsxs(F,{breadcrumbs:Z,children:[y,t.jsxs("div",{className:"flex min-h-full flex-col gap-6 bg-zinc-950 p-6 text-zinc-100",children:[m,x]})]}),e[34]=m,e[35]=x,e[36]=M):M=e[36],M}function ee(s){return t.jsxs(P,{href:`/rooms/${s.name}/monitor`,className:"group relative aspect-video overflow-hidden rounded-xl border border-zinc-800 bg-zinc-900 transition-all hover:border-zinc-700 hover:shadow-2xl",children:[t.jsx(G,{roomId:s.name,variant:"card"}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 transition-opacity group-hover:opacity-100",children:t.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-white/10 px-4 py-2 text-sm font-bold text-white backdrop-blur-md",children:[t.jsx(C,{className:"h-4 w-4"}),"Watch Live"]})})]},s.id)}function te(s,e){return s+(e.viewerCount||0)}export{he as default};
