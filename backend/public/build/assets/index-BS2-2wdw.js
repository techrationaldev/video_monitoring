import{a as r,j as e,b as ne}from"./app-DIutFi-4.js";import{l as re,A as ie,M as ce,a as de}from"./index-DUjThXAE.js";import{c as E}from"./createLucideIcon-DiCQwaJw.js";import{S as le}from"./settings-akrv6tKs.js";/* empty css            *//**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]],W=E("CameraOff",ue);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],me=E("Camera",he);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]],G=E("PhoneOff",pe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]],xe=E("Signal",fe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],ge=E("Volume2",ve);function be({onReady:k}){const[t,o]=r.useState([]),[n,h]=r.useState([]),[x,v]=r.useState(""),[b,D]=r.useState(""),[l,P]=r.useState(!0),[m,L]=r.useState(!0),[f,I]=r.useState(null),g=r.useRef(null);r.useEffect(()=>{y()},[]),r.useEffect(()=>(j(),()=>{f&&f.getTracks().forEach(a=>a.stop())}),[x,b]),r.useEffect(()=>{f&&(f.getVideoTracks().forEach(a=>a.enabled=l),f.getAudioTracks().forEach(a=>a.enabled=m))},[l,m,f]);const y=async()=>{try{await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});const a=await navigator.mediaDevices.enumerateDevices();o(a.filter(T=>T.kind==="videoinput")),h(a.filter(T=>T.kind==="audioinput"));const S=a.find(T=>T.kind==="videoinput"),w=a.find(T=>T.kind==="audioinput");S&&v(S.deviceId),w&&D(w.deviceId)}catch(a){console.error("Error getting devices:",a)}},j=async()=>{f&&f.getTracks().forEach(a=>a.stop());try{const a=await navigator.mediaDevices.getUserMedia({video:x?{deviceId:{exact:x}}:!0,audio:b?{deviceId:{exact:b}}:!0});I(a),g.current&&(g.current.srcObject=a)}catch(a){console.error("Error starting preview:",a)}},A=()=>{f&&k(f,l,m)};return e.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gray-900 p-4 text-white",children:e.jsxs("div",{className:"w-full max-w-md overflow-hidden rounded-xl bg-gray-800 shadow-2xl",children:[e.jsxs("div",{className:"relative aspect-video bg-black",children:[e.jsx("video",{ref:g,autoPlay:!0,muted:!0,playsInline:!0,className:`h-full w-full object-cover ${l?"":"hidden"}`}),!l&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500",children:"Camera Off"}),e.jsxs("div",{className:"absolute right-0 bottom-4 left-0 flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>L(!m),className:`rounded-full p-3 ${m?"bg-gray-700 hover:bg-gray-600":"bg-red-500 hover:bg-red-600"} transition-colors`,children:m?"Mic On":"Mic Off"}),e.jsx("button",{onClick:()=>P(!l),className:`rounded-full p-3 ${l?"bg-gray-700 hover:bg-gray-600":"bg-red-500 hover:bg-red-600"} transition-colors`,children:l?"Cam On":"Cam Off"})]})]}),e.jsxs("div",{className:"space-y-4 p-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-400",children:"Camera"}),e.jsx("select",{value:x,onChange:a=>v(a.target.value),className:"w-full rounded-lg border-none bg-gray-700 px-3 py-2 text-white focus:ring-2 focus:ring-indigo-500",children:t.map(a=>e.jsx("option",{value:a.deviceId,children:a.label||`Camera ${a.deviceId.slice(0,5)}...`},a.deviceId))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-400",children:"Microphone"}),e.jsx("select",{value:b,onChange:a=>D(a.target.value),className:"w-full rounded-lg border-none bg-gray-700 px-3 py-2 text-white focus:ring-2 focus:ring-indigo-500",children:n.map(a=>e.jsx("option",{value:a.deviceId,children:a.label||`Mic ${a.deviceId.slice(0,5)}...`},a.deviceId))})]}),e.jsx("button",{onClick:A,className:"mt-4 w-full rounded-lg bg-indigo-600 px-4 py-3 font-bold text-white transition-colors hover:bg-indigo-700",children:"Start Streaming"})]})]})})}class we{ws;device=null;sendTransport;recvTransport;producers=new Map;consumers=new Map;audioProducer=null;videoProducer=null;roomId;clientId;deviceLoadedPromise;deviceLoadedResolver=null;transportReadyPromise;transportReadyResolver=null;onTrackCallback=null;onTrackEndedCallback=null;constructor(t,o,n){this.ws=new WebSocket(t),this.roomId=o,this.clientId=n,this.deviceLoadedPromise=new Promise(h=>{this.deviceLoadedResolver=h}),this.transportReadyPromise=new Promise(h=>{this.transportReadyResolver=h}),console.log("[CLIENT] WebRTC Client Created, room:",o,"client:",n)}onTrack(t){this.onTrackCallback=t}onTrackEnded(t){this.onTrackEndedCallback=t}onMessage(t){this.ws.onmessage=o=>{const n=JSON.parse(o.data);console.log(`[CLIENT] WS RECV: ${n.action}`,n),n.action==="restart-ice-done"&&this.handleRestartIceDone(n.data),n.action==="create-recv-transport"&&this.createRecvTransport(n.data),n.action==="new-producer"&&this.consume(n.data.producerId),n.action==="producer-closed"&&this.handleProducerClosed(n.data),n.action==="consume-done"&&this.handleConsumeDone(n.data),n.action==="session-ended"&&(console.warn("[CLIENT] Session ended by server (restart?), reloading..."),window.location.reload()),t(n)}}handleProducerClosed(t){const{producerId:o}=t;console.log("[CLIENT] Producer closed:",o);for(const[n,h]of this.consumers)if(h.producerId===o){console.log("[CLIENT] Closing consumer:",n),h.close(),this.consumers.delete(n),this.onTrackEndedCallback&&this.onTrackEndedCallback(h.track.id);break}}send(t){const o={...t,clientId:this.clientId};console.log(`[CLIENT] WS SEND: ${t.action}`,o),this.ws.send(JSON.stringify(o))}async init(){return new Promise(t=>{this.connectWs(t)})}connectWs(t){this.ws=new WebSocket(this.ws.url),this.ws.onopen=()=>{console.log("[CLIENT] WS CONNECTED"),this.send({action:"join-as-streamer",roomId:this.roomId}),this.send({action:"create-recv-transport",roomId:this.roomId}),t&&t()},this.ws.onclose=()=>{console.log("[CLIENT] WS CLOSED, reconnecting in 3s..."),setTimeout(()=>this.connectWs(),3e3)},this.ws.onerror=o=>{console.error("[CLIENT] WS ERROR:",o),this.ws.close()},this.onMessage(o=>{})}async loadDevice(t){console.log("[CLIENT] Loading device with capabilities:",t),this.device=new re.Device,await this.device.load({routerRtpCapabilities:t}),console.log("[CLIENT] Device loaded"),this.deviceLoadedResolver&&this.deviceLoadedResolver()}async createSendTransport(t){if(console.log("[CLIENT] createSendTransport options received:",t),!t){console.error("[CLIENT] ERROR! createSendTransport called with EMPTY options");return}if(await this.deviceLoadedPromise,!this.device){console.error("[CLIENT] Device is null after waiting!");return}this.sendTransport=this.device.createSendTransport(t),this.transportReadyResolver&&this.transportReadyResolver(),this.sendTransport.on("connect",({dtlsParameters:o},n)=>{console.log("[CLIENT] Transport connect"),this.send({action:"connect-transport",roomId:this.roomId,data:{transportId:this.sendTransport.id,dtlsParameters:o}}),n()}),this.sendTransport.on("connectionstatechange",async o=>{console.log(`[CLIENT] Send Transport connection state changed: ${o}`),(o==="failed"||o==="disconnected")&&(console.warn("[CLIENT] Transport failed/disconnected. Not restarting ICE to avoid loops. Reloading..."),window.location.reload())}),this.sendTransport.on("produce",({kind:o,rtpParameters:n},h)=>{console.log("[CLIENT] Transport produce"),this.send({action:"produce",roomId:this.roomId,data:{transportId:this.sendTransport.id,kind:o,rtpParameters:n,appData:arguments[0].appData}});const x=v=>{const b=JSON.parse(v.data);b.action==="produce-done"&&(console.log("[CLIENT] producer created:",b.producerId),h({id:b.producerId}),this.ws.removeEventListener("message",x))};this.ws.addEventListener("message",x)})}async produceStream(t,o={}){if(await this.transportReadyPromise,!this.sendTransport){console.error("[CLIENT] sendTransport is not ready!");return}const n=t.getVideoTracks()[0];n&&(console.log("[CLIENT] Producing video track..."),this.videoProducer=await this.sendTransport.produce({track:n,appData:{...o,source:"webcam"}}),this.producers.set("video",this.videoProducer));const h=t.getAudioTracks()[0];h&&(console.log("[CLIENT] Producing audio track..."),this.audioProducer=await this.sendTransport.produce({track:h,appData:{...o,source:"mic"}}),this.producers.set("audio",this.audioProducer))}async replaceVideoTrack(t){this.videoProducer&&await this.videoProducer.replaceTrack({track:t})}async replaceAudioTrack(t){this.audioProducer&&await this.audioProducer.replaceTrack({track:t})}muteAudio(){this.audioProducer&&this.audioProducer.pause()}unmuteAudio(){this.audioProducer&&this.audioProducer.resume()}pauseVideo(){this.videoProducer&&this.videoProducer.pause()}resumeVideo(){this.videoProducer&&this.videoProducer.resume()}restartIce(t){this.send({action:"restart-ice",roomId:this.roomId,data:{transportId:t}})}async handleRestartIceDone(t){const{transportId:o,iceParameters:n}=t;this.sendTransport&&this.sendTransport.id===o&&(console.log("[CLIENT] Restarting ICE with new parameters"),await this.sendTransport.restartIce({iceParameters:n}))}handleAdminAction(t,o){switch(console.log(`[CLIENT] Handling admin action: ${t}`,o),t){case"mute-audio":this.muteAudio();break;case"unmute-audio":this.unmuteAudio();break;case"mute-video":this.pauseVideo();break;case"unmute-video":this.resumeVideo();break;case"reload":window.location.reload();break;default:console.warn(`[CLIENT] Unknown admin action: ${t}`)}}async createRecvTransport(t){if(console.log("[CLIENT] createRecvTransport options received:",t),await this.deviceLoadedPromise,!this.device){console.error("[CLIENT] Device is null after waiting!");return}this.recvTransport=this.device.createRecvTransport(t),this.recvTransport.on("connect",({dtlsParameters:o},n)=>{console.log("[CLIENT] Recv Transport connect"),this.send({action:"connect-transport",roomId:this.roomId,data:{transportId:this.recvTransport.id,dtlsParameters:o}}),n()}),this.recvTransport.on("connectionstatechange",async o=>{console.log(`[CLIENT] Recv Transport connection state changed: ${o}`)})}async consume(t){if(console.log("[CLIENT] Attempting to consume producer:",t),await this.deviceLoadedPromise,!this.device||!this.recvTransport){console.warn("[CLIENT] Device or RecvTransport not ready");return}const o=this.device.rtpCapabilities;this.send({action:"consume",roomId:this.roomId,data:{transportId:this.recvTransport.id,producerId:t,rtpCapabilities:o}})}async handleConsumeDone(t){const{id:o,producerId:n,kind:h,rtpParameters:x}=t;if(console.log("[CLIENT] handleConsumeDone:",o,h),!this.recvTransport)return;const v=await this.recvTransport.consume({id:o,producerId:n,kind:h,rtpParameters:x});this.consumers.set(v.id,v),this.onTrackCallback&&this.onTrackCallback(v.track),this.send({action:"resume-consumer",roomId:this.roomId,data:{consumerId:v.id}})}close(){console.log("[CLIENT] Closing client..."),this.producers.forEach(t=>{t.close()}),this.producers.clear(),this.consumers.forEach(t=>{t.close()}),this.consumers.clear(),this.sendTransport&&(this.sendTransport.close(),this.sendTransport=null),this.recvTransport&&(this.recvTransport.close(),this.recvTransport=null),this.ws&&this.ws.close(),console.log("[CLIENT] Client closed")}}function je(){const k=r.useRef(null),[t,o]=r.useState(!1),[n,h]=r.useState(0),[x,v]=r.useState(!1),[b,D]=r.useState(!1),[l,P]=r.useState(null),[m,L]=r.useState(null),[f,I]=r.useState(!0),[g,y]=r.useState(!0),[j,A]=r.useState(!1),[a,S]=r.useState(null),w=r.useRef(null),[T,U]=r.useState([]),[F,q]=r.useState([]),[R,H]=r.useState([]),[O,M]=r.useState(""),[z,V]=r.useState(""),[$,_]=r.useState(""),[J,B]=r.useState(0);r.useEffect(()=>{let s;return t&&(s=setInterval(()=>{B(i=>i+1)},1e3)),()=>clearInterval(s)},[t]);const Y=s=>{const i=Math.floor(s/3600),p=Math.floor(s%3600/60),c=s%60;return`${i.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`};r.useEffect(()=>{const s=async()=>{try{const i=await navigator.mediaDevices.enumerateDevices(),p=i.filter(u=>u.kind==="videoinput"),c=i.filter(u=>u.kind==="audioinput"),d=i.filter(u=>u.kind==="audiooutput");U(p),q(c),H(d),p.length>0&&!O&&M(p[0].deviceId),c.length>0&&!z&&V(c[0].deviceId),d.length>0&&!$&&_(d[0].deviceId)}catch(i){console.error("[PAGE] Failed to enumerate devices:",i)}};return s(),navigator.mediaDevices.addEventListener("devicechange",s),()=>navigator.mediaDevices.removeEventListener("devicechange",s)},[]);const K=(s,i,p)=>{P(s),y(i),I(p),v(!0),Q(s)},Q=s=>{let i=localStorage.getItem("stream_room_id");i||(i=`client-${Date.now()}`,localStorage.setItem("stream_room_id",i));let p=sessionStorage.getItem(`stream_connection_id_${i}`);p||(p=crypto.randomUUID(),sessionStorage.setItem(`stream_connection_id_${i}`,p)),ne.post(`/api/rooms/${i}/join`,{connection_id:p}).then(()=>{console.log("[PAGE] Session created in DB");const c=new we("wss://eyeserver.mytro.in",i,p);L(c),c.onTrack(d=>{console.log("[PAGE] Received remote track:",d.kind,d.id),d.kind==="audio"&&S(d)}),c.onTrackEnded(d=>{console.log("[PAGE] Track ended:",d),S(u=>u&&u.id===d?null:u)}),c.init().then(()=>{c.onMessage(async d=>{if(d.action==="router-rtp-capabilities"&&await c.loadDevice(d.data),d.action==="create-send-transport"&&d.data&&await c.createSendTransport(d.data),d.action==="start-produce"){const u=navigator.userAgent;let N="Unknown OS";u.indexOf("Win")!==-1&&(N="Windows"),u.indexOf("Mac")!==-1&&(N="macOS"),u.indexOf("Linux")!==-1&&(N="Linux"),u.indexOf("Android")!==-1&&(N="Android"),u.indexOf("like Mac")!==-1&&(N="iOS");let C="Unknown Browser";u.indexOf("Chrome")!==-1&&(C="Chrome"),u.indexOf("Firefox")!==-1&&(C="Firefox"),u.indexOf("Safari")!==-1&&u.indexOf("Chrome")===-1&&(C="Safari"),u.indexOf("Edge")!==-1&&(C="Edge");const ae={os:N,browser:C,ip:"127.0.0.1"};await c.produceStream(s,ae),o(!0)}d.action==="viewer-count"&&h(d.count),d.action==="session-ended"&&(console.warn("[PAGE] Session ended by server, reloading..."),window.location.reload()),d.action==="admin-action"&&c&&c.handleAdminAction(d.data.type,d.data.payload)})})}).catch(c=>console.error("[PAGE] Failed to join room API:",c))};r.useEffect(()=>{k.current&&l&&(k.current.srcObject=l)},[l,t]),r.useEffect(()=>{if(w.current&&a){console.log("[PAGE] Playing remote audio track");const s=new MediaStream([a]);w.current.srcObject=s,w.current.play().catch(i=>console.error("[PAGE] Remote audio play failed:",i))}},[a]);const X=()=>{m&&(f?m.muteAudio():m.unmuteAudio(),I(!f))},Z=()=>{m&&(g?m.pauseVideo():m.resumeVideo(),y(!g))},ee=async s=>{try{const p=(await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:s}}})).getVideoTracks()[0];if(m&&await m.replaceVideoTrack(p),l){const c=l.getVideoTracks()[0];c&&(l.removeTrack(c),c.stop()),l.addTrack(p),k.current&&(k.current.srcObject=l)}M(s),y(!0)}catch(i){console.error("[PAGE] Failed to switch camera:",i)}},te=async s=>{try{const p=(await navigator.mediaDevices.getUserMedia({audio:{deviceId:{exact:s}}})).getAudioTracks()[0];if(m&&await m.replaceAudioTrack(p),l){const c=l.getAudioTracks()[0];c&&(l.removeTrack(c),c.stop()),l.addTrack(p)}V(s),I(!0)}catch(i){console.error("[PAGE] Failed to switch microphone:",i)}},se=async s=>{try{w.current&&"setSinkId"in w.current?(await w.current.setSinkId(s),_(s)):console.warn("Audio output selection not supported")}catch(i){console.error("Failed to set audio output device:",i)}},oe=()=>{confirm("Are you sure you want to end the stream?")&&(m&&m.close(),l&&l.getTracks().forEach(s=>s.stop()),o(!1),D(!0))};return b?e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-black p-6 text-white",children:e.jsxs("div",{className:"w-full max-w-md rounded-xl border border-zinc-800 bg-zinc-900 p-8 text-center shadow-2xl",children:[e.jsx("div",{className:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-red-500/10",children:e.jsx(G,{className:"h-10 w-10 text-red-500"})}),e.jsx("h2",{className:"mb-2 text-3xl font-bold text-white",children:"Stream Ended"}),e.jsx("p",{className:"mb-8 text-zinc-400",children:"The streaming session has been terminated successfully."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full rounded-lg bg-blue-600 px-6 py-3 font-medium text-white transition-colors hover:bg-blue-700",children:"Start New Stream"})]})}):x?e.jsxs("div",{className:"relative h-screen w-screen overflow-hidden bg-black text-white",children:[e.jsx("video",{ref:k,autoPlay:!0,muted:!0,playsInline:!0,className:`h-full w-full object-contain ${g?"":"opacity-0"}`}),!g&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-zinc-900/90",children:[e.jsx(W,{className:"mb-4 h-16 w-16 text-zinc-600"}),e.jsx("span",{className:"text-xl font-medium text-zinc-400",children:"Camera Paused"})]}),e.jsxs("div",{className:"pointer-events-none absolute top-0 right-0 left-0 flex items-start justify-between bg-gradient-to-b from-black/80 to-transparent p-6",children:[e.jsxs("div",{className:"pointer-events-auto flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center gap-2 rounded-full border border-zinc-800 bg-zinc-900/80 px-3 py-1.5 backdrop-blur-md",children:t?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"relative flex h-2.5 w-2.5",children:[e.jsx("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex h-2.5 w-2.5 rounded-full bg-red-500"})]}),e.jsx("span",{className:"text-xs font-bold tracking-wider text-red-500",children:"LIVE"})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-2.5 w-2.5 animate-pulse rounded-full bg-yellow-500"}),e.jsx("span",{className:"text-xs font-bold tracking-wider text-yellow-500",children:"CONNECTING"})]})}),e.jsx("div",{className:"rounded-full border border-zinc-800 bg-zinc-900/80 px-3 py-1.5 font-mono text-sm text-zinc-300 backdrop-blur-md",children:Y(J)})]}),e.jsx("div",{className:"pointer-events-auto flex items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-green-500/20 bg-green-500/10 px-3 py-1.5 backdrop-blur-md",children:[e.jsx(xe,{className:"h-3.5 w-3.5 text-green-500"}),e.jsx("span",{className:"text-xs font-medium text-green-500",children:"Excellent"})]})})]}),e.jsx("div",{className:"pointer-events-none absolute bottom-28 left-6",children:e.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-zinc-800 bg-zinc-900/80 px-4 py-2 backdrop-blur-md",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-600 text-xs font-bold",children:"YOU"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-white",children:"Client Stream"}),e.jsx("span",{className:"font-mono text-xs text-zinc-400",children:localStorage.getItem("stream_room_id")})]}),e.jsx("div",{className:"mx-1 h-4 w-[1px] bg-zinc-700"}),e.jsx(ie,{className:"h-4 w-4 text-green-500"})]})}),e.jsx("audio",{ref:w,autoPlay:!0}),a&&e.jsx("div",{className:"pointer-events-auto absolute top-24 right-6 animate-in duration-300 fade-in slide-in-from-right",children:e.jsxs("div",{className:"flex animate-pulse items-center gap-3 rounded-lg bg-red-500 px-4 py-2 text-white shadow-lg",children:[e.jsx(ge,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-bold",children:"Admin Speaking..."})]})}),e.jsxs("div",{className:"absolute bottom-8 left-1/2 flex -translate-x-1/2 items-center gap-3 rounded-2xl border border-zinc-800 bg-zinc-900/90 p-2 shadow-2xl backdrop-blur-xl",children:[e.jsx("button",{onClick:X,className:`rounded-xl p-3.5 transition-all duration-200 ${f?"bg-zinc-800 text-white hover:bg-zinc-700":"border border-red-500/50 bg-red-500/10 text-red-500 hover:bg-red-500/20"}`,title:f?"Mute Mic":"Unmute Mic",children:f?e.jsx(ce,{className:"h-5 w-5"}):e.jsx(de,{className:"h-5 w-5"})}),e.jsx("button",{onClick:Z,className:`rounded-xl p-3.5 transition-all duration-200 ${g?"bg-zinc-800 text-white hover:bg-zinc-700":"border border-red-500/50 bg-red-500/10 text-red-500 hover:bg-red-500/20"}`,title:g?"Turn Off Camera":"Turn On Camera",children:g?e.jsx(me,{className:"h-5 w-5"}):e.jsx(W,{className:"h-5 w-5"})}),e.jsx("div",{className:"mx-1 h-8 w-[1px] bg-zinc-800"}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>A(!j),className:`rounded-xl p-3.5 transition-all duration-200 ${j?"bg-blue-600 text-white":"bg-zinc-800 text-white hover:bg-zinc-700"}`,title:"Settings",children:e.jsx(le,{className:"h-5 w-5"})}),j&&e.jsxs("div",{className:"absolute bottom-full left-1/2 mb-4 w-72 -translate-x-1/2 animate-in rounded-xl border border-zinc-800 bg-zinc-900 p-4 shadow-2xl duration-200 zoom-in-95",children:[e.jsx("h3",{className:"mb-3 text-xs font-bold tracking-wider text-zinc-500 uppercase",children:"Device Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs text-zinc-400",children:"Camera"}),e.jsx("select",{value:O,onChange:s=>ee(s.target.value),className:"w-full rounded-lg border border-zinc-800 bg-zinc-950 px-2.5 py-2 text-sm text-white outline-none focus:border-transparent focus:ring-2 focus:ring-blue-600",children:T.map(s=>e.jsx("option",{value:s.deviceId,children:s.label||`Camera ${s.deviceId.slice(0,5)}...`},s.deviceId))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs text-zinc-400",children:"Microphone"}),e.jsx("select",{value:z,onChange:s=>te(s.target.value),className:"w-full rounded-lg border border-zinc-800 bg-zinc-950 px-2.5 py-2 text-sm text-white outline-none focus:border-transparent focus:ring-2 focus:ring-blue-600",children:F.map(s=>e.jsx("option",{value:s.deviceId,children:s.label||`Mic ${s.deviceId.slice(0,5)}...`},s.deviceId))})]}),R.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs text-zinc-400",children:"Speaker"}),e.jsx("select",{value:$,onChange:s=>se(s.target.value),className:"w-full rounded-lg border border-zinc-800 bg-zinc-950 px-2.5 py-2 text-sm text-white outline-none focus:border-transparent focus:ring-2 focus:ring-blue-600",children:R.map(s=>e.jsx("option",{value:s.deviceId,children:s.label||`Speaker ${s.deviceId.slice(0,5)}...`},s.deviceId))})]})]})]})]}),e.jsxs("button",{onClick:oe,className:"flex items-center gap-2 rounded-xl bg-red-600 px-6 py-3.5 text-sm font-bold text-white transition-all duration-200 hover:bg-red-700",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{children:"End Stream"})]})]})]}):e.jsx(be,{onReady:K})}export{je as default};
