import{a as i,j as e,b as Y}from"./app-BBWRKX2L.js";import{l as q,A as K}from"./index-BgmI7n5W.js";/* empty css            */function Q({onReady:k}){const[t,r]=i.useState([]),[a,m]=i.useState([]),[p,f]=i.useState(""),[x,j]=i.useState(""),[n,S]=i.useState(!0),[u,L]=i.useState(!0),[g,T]=i.useState(null),v=i.useRef(null);i.useEffect(()=>{I()},[]),i.useEffect(()=>(y(),()=>{g&&g.getTracks().forEach(s=>s.stop())}),[p,x]),i.useEffect(()=>{g&&(g.getVideoTracks().forEach(s=>s.enabled=n),g.getAudioTracks().forEach(s=>s.enabled=u))},[n,u,g]);const I=async()=>{try{await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});const s=await navigator.mediaDevices.enumerateDevices();r(s.filter(b=>b.kind==="videoinput")),m(s.filter(b=>b.kind==="audioinput"));const C=s.find(b=>b.kind==="videoinput"),E=s.find(b=>b.kind==="audioinput");C&&f(C.deviceId),E&&j(E.deviceId)}catch(s){console.error("Error getting devices:",s)}},y=async()=>{g&&g.getTracks().forEach(s=>s.stop());try{const s=await navigator.mediaDevices.getUserMedia({video:p?{deviceId:{exact:p}}:!0,audio:x?{deviceId:{exact:x}}:!0});T(s),v.current&&(v.current.srcObject=s)}catch(s){console.error("Error starting preview:",s)}},N=()=>{g&&k(g,n,u)};return e.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gray-900 p-4 text-white",children:e.jsxs("div",{className:"w-full max-w-md overflow-hidden rounded-xl bg-gray-800 shadow-2xl",children:[e.jsxs("div",{className:"relative aspect-video bg-black",children:[e.jsx("video",{ref:v,autoPlay:!0,muted:!0,playsInline:!0,className:`h-full w-full object-cover ${n?"":"hidden"}`}),!n&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500",children:"Camera Off"}),e.jsxs("div",{className:"absolute right-0 bottom-4 left-0 flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>L(!u),className:`rounded-full p-3 ${u?"bg-gray-700 hover:bg-gray-600":"bg-red-500 hover:bg-red-600"} transition-colors`,children:u?"Mic On":"Mic Off"}),e.jsx("button",{onClick:()=>S(!n),className:`rounded-full p-3 ${n?"bg-gray-700 hover:bg-gray-600":"bg-red-500 hover:bg-red-600"} transition-colors`,children:n?"Cam On":"Cam Off"})]})]}),e.jsxs("div",{className:"space-y-4 p-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-400",children:"Camera"}),e.jsx("select",{value:p,onChange:s=>f(s.target.value),className:"w-full rounded-lg border-none bg-gray-700 px-3 py-2 text-white focus:ring-2 focus:ring-indigo-500",children:t.map(s=>e.jsx("option",{value:s.deviceId,children:s.label||`Camera ${s.deviceId.slice(0,5)}...`},s.deviceId))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-400",children:"Microphone"}),e.jsx("select",{value:x,onChange:s=>j(s.target.value),className:"w-full rounded-lg border-none bg-gray-700 px-3 py-2 text-white focus:ring-2 focus:ring-indigo-500",children:a.map(s=>e.jsx("option",{value:s.deviceId,children:s.label||`Mic ${s.deviceId.slice(0,5)}...`},s.deviceId))})]}),e.jsx("button",{onClick:N,className:"mt-4 w-full rounded-lg bg-indigo-600 px-4 py-3 font-bold text-white transition-colors hover:bg-indigo-700",children:"Start Streaming"})]})]})})}class X{ws;device=null;sendTransport;recvTransport;producers=new Map;consumers=new Map;audioProducer=null;videoProducer=null;roomId;clientId;deviceLoadedPromise;deviceLoadedResolver=null;transportReadyPromise;transportReadyResolver=null;onTrackCallback=null;onTrackEndedCallback=null;constructor(t,r,a){this.ws=new WebSocket(t),this.roomId=r,this.clientId=a,this.deviceLoadedPromise=new Promise(m=>{this.deviceLoadedResolver=m}),this.transportReadyPromise=new Promise(m=>{this.transportReadyResolver=m}),console.log("[CLIENT] WebRTC Client Created, room:",r,"client:",a)}onTrack(t){this.onTrackCallback=t}onTrackEnded(t){this.onTrackEndedCallback=t}onMessage(t){this.ws.onmessage=r=>{const a=JSON.parse(r.data);console.log(`[CLIENT] WS RECV: ${a.action}`,a),a.action==="restart-ice-done"&&this.handleRestartIceDone(a.data),a.action==="create-recv-transport"&&this.createRecvTransport(a.data),a.action==="new-producer"&&this.consume(a.data.producerId),a.action==="producer-closed"&&this.handleProducerClosed(a.data),a.action==="consume-done"&&this.handleConsumeDone(a.data),a.action==="session-ended"&&(console.warn("[CLIENT] Session ended by server (restart?), reloading..."),window.location.reload()),t(a)}}handleProducerClosed(t){const{producerId:r}=t;console.log("[CLIENT] Producer closed:",r);for(const[a,m]of this.consumers)if(m.producerId===r){console.log("[CLIENT] Closing consumer:",a),m.close(),this.consumers.delete(a),this.onTrackEndedCallback&&this.onTrackEndedCallback(m.track.id);break}}send(t){const r={...t,clientId:this.clientId};console.log(`[CLIENT] WS SEND: ${t.action}`,r),this.ws.send(JSON.stringify(r))}async init(){return new Promise(t=>{this.connectWs(t)})}connectWs(t){this.ws=new WebSocket(this.ws.url),this.ws.onopen=()=>{console.log("[CLIENT] WS CONNECTED"),this.send({action:"join-as-streamer",roomId:this.roomId}),this.send({action:"create-recv-transport",roomId:this.roomId}),t&&t()},this.ws.onclose=()=>{console.log("[CLIENT] WS CLOSED, reconnecting in 3s..."),setTimeout(()=>this.connectWs(),3e3)},this.ws.onerror=r=>{console.error("[CLIENT] WS ERROR:",r),this.ws.close()},this.onMessage(r=>{})}async loadDevice(t){console.log("[CLIENT] Loading device with capabilities:",t),this.device=new q.Device,await this.device.load({routerRtpCapabilities:t}),console.log("[CLIENT] Device loaded"),this.deviceLoadedResolver&&this.deviceLoadedResolver()}async createSendTransport(t){if(console.log("[CLIENT] createSendTransport options received:",t),!t){console.error("[CLIENT] ERROR! createSendTransport called with EMPTY options");return}if(await this.deviceLoadedPromise,!this.device){console.error("[CLIENT] Device is null after waiting!");return}this.sendTransport=this.device.createSendTransport(t),this.transportReadyResolver&&this.transportReadyResolver(),this.sendTransport.on("connect",({dtlsParameters:r},a)=>{console.log("[CLIENT] Transport connect"),this.send({action:"connect-transport",roomId:this.roomId,data:{transportId:this.sendTransport.id,dtlsParameters:r}}),a()}),this.sendTransport.on("connectionstatechange",async r=>{console.log(`[CLIENT] Send Transport connection state changed: ${r}`),(r==="failed"||r==="disconnected")&&(console.warn("[CLIENT] Transport failed/disconnected. Not restarting ICE to avoid loops. Reloading..."),window.location.reload())}),this.sendTransport.on("produce",({kind:r,rtpParameters:a},m)=>{console.log("[CLIENT] Transport produce"),this.send({action:"produce",roomId:this.roomId,data:{transportId:this.sendTransport.id,kind:r,rtpParameters:a}});const p=f=>{const x=JSON.parse(f.data);x.action==="produce-done"&&(console.log("[CLIENT] producer created:",x.producerId),m({id:x.producerId}),this.ws.removeEventListener("message",p))};this.ws.addEventListener("message",p)})}async produceStream(t){if(await this.transportReadyPromise,!this.sendTransport){console.error("[CLIENT] sendTransport is not ready!");return}const r=t.getVideoTracks()[0];r&&(console.log("[CLIENT] Producing video track..."),this.videoProducer=await this.sendTransport.produce({track:r}),this.producers.set("video",this.videoProducer));const a=t.getAudioTracks()[0];a&&(console.log("[CLIENT] Producing audio track..."),this.audioProducer=await this.sendTransport.produce({track:a}),this.producers.set("audio",this.audioProducer))}async replaceVideoTrack(t){this.videoProducer&&await this.videoProducer.replaceTrack({track:t})}async replaceAudioTrack(t){this.audioProducer&&await this.audioProducer.replaceTrack({track:t})}muteAudio(){this.audioProducer&&this.audioProducer.pause()}unmuteAudio(){this.audioProducer&&this.audioProducer.resume()}pauseVideo(){this.videoProducer&&this.videoProducer.pause()}resumeVideo(){this.videoProducer&&this.videoProducer.resume()}restartIce(t){this.send({action:"restart-ice",roomId:this.roomId,data:{transportId:t}})}async handleRestartIceDone(t){const{transportId:r,iceParameters:a}=t;this.sendTransport&&this.sendTransport.id===r&&(console.log("[CLIENT] Restarting ICE with new parameters"),await this.sendTransport.restartIce({iceParameters:a}))}handleAdminAction(t,r){switch(console.log(`[CLIENT] Handling admin action: ${t}`,r),t){case"mute-audio":this.muteAudio();break;case"unmute-audio":this.unmuteAudio();break;case"mute-video":this.pauseVideo();break;case"unmute-video":this.resumeVideo();break;case"reload":window.location.reload();break;default:console.warn(`[CLIENT] Unknown admin action: ${t}`)}}async createRecvTransport(t){if(console.log("[CLIENT] createRecvTransport options received:",t),await this.deviceLoadedPromise,!this.device){console.error("[CLIENT] Device is null after waiting!");return}this.recvTransport=this.device.createRecvTransport(t),this.recvTransport.on("connect",({dtlsParameters:r},a)=>{console.log("[CLIENT] Recv Transport connect"),this.send({action:"connect-transport",roomId:this.roomId,data:{transportId:this.recvTransport.id,dtlsParameters:r}}),a()}),this.recvTransport.on("connectionstatechange",async r=>{console.log(`[CLIENT] Recv Transport connection state changed: ${r}`)})}async consume(t){if(console.log("[CLIENT] Attempting to consume producer:",t),await this.deviceLoadedPromise,!this.device||!this.recvTransport){console.warn("[CLIENT] Device or RecvTransport not ready");return}const r=this.device.rtpCapabilities;this.send({action:"consume",roomId:this.roomId,data:{transportId:this.recvTransport.id,producerId:t,rtpCapabilities:r}})}async handleConsumeDone(t){const{id:r,producerId:a,kind:m,rtpParameters:p}=t;if(console.log("[CLIENT] handleConsumeDone:",r,m),!this.recvTransport)return;const f=await this.recvTransport.consume({id:r,producerId:a,kind:m,rtpParameters:p});this.consumers.set(f.id,f),this.onTrackCallback&&this.onTrackCallback(f.track),this.send({action:"resume-consumer",roomId:this.roomId,data:{consumerId:f.id}})}close(){console.log("[CLIENT] Closing client..."),this.producers.forEach(t=>{t.close()}),this.producers.clear(),this.consumers.forEach(t=>{t.close()}),this.consumers.clear(),this.sendTransport&&(this.sendTransport.close(),this.sendTransport=null),this.recvTransport&&(this.recvTransport.close(),this.recvTransport=null),this.ws&&this.ws.close(),console.log("[CLIENT] Client closed")}}function re(){const k=i.useRef(null),[t,r]=i.useState(!1),[a,m]=i.useState(0),[p,f]=i.useState(!1),[x,j]=i.useState(!1),[n,S]=i.useState(null),[u,L]=i.useState(null),[g,T]=i.useState(!0),[v,I]=i.useState(!0),[y,N]=i.useState(null),s=i.useRef(null),[C,E]=i.useState([]),[b,$]=i.useState([]),[P,W]=i.useState([]),[A,D]=i.useState(""),[R,M]=i.useState(""),[V,O]=i.useState("");i.useEffect(()=>{const o=async()=>{try{const c=await navigator.mediaDevices.enumerateDevices(),h=c.filter(w=>w.kind==="videoinput"),d=c.filter(w=>w.kind==="audioinput"),l=c.filter(w=>w.kind==="audiooutput");E(h),$(d),W(l),h.length>0&&!A&&D(h[0].deviceId),d.length>0&&!R&&M(d[0].deviceId),l.length>0&&!V&&O(l[0].deviceId)}catch(c){console.error("[PAGE] Failed to enumerate devices:",c)}};return o(),navigator.mediaDevices.addEventListener("devicechange",o),()=>navigator.mediaDevices.removeEventListener("devicechange",o)},[]);const G=(o,c,h)=>{S(o),I(c),T(h),f(!0),_(o)},_=o=>{let c=localStorage.getItem("stream_room_id");c||(c=`client-${Date.now()}`,localStorage.setItem("stream_room_id",c));let h=sessionStorage.getItem(`stream_connection_id_${c}`);h||(h=crypto.randomUUID(),sessionStorage.setItem(`stream_connection_id_${c}`,h)),Y.post(`/api/rooms/${c}/join`,{connection_id:h}).then(()=>{console.log("[PAGE] Session created in DB");const d=new X("wss://eyeserver.mytro.in",c,h);L(d),d.onTrack(l=>{console.log("[PAGE] Received remote track:",l.kind,l.id),l.kind==="audio"&&N(l)}),d.onTrackEnded(l=>{console.log("[PAGE] Track ended:",l),N(w=>w&&w.id===l?null:w)}),d.init().then(()=>{d.onMessage(async l=>{l.action==="router-rtp-capabilities"&&await d.loadDevice(l.data),l.action==="create-send-transport"&&l.data&&await d.createSendTransport(l.data),l.action==="start-produce"&&(await d.produceStream(o),r(!0)),l.action==="viewer-count"&&m(l.count),l.action==="session-ended"&&(console.warn("[PAGE] Session ended by server, reloading..."),window.location.reload()),l.action==="admin-action"&&d&&d.handleAdminAction(l.data.type,l.data.payload)})})}).catch(d=>console.error("[PAGE] Failed to join room API:",d))};i.useEffect(()=>{k.current&&n&&(k.current.srcObject=n)},[n,t]),i.useEffect(()=>{if(s.current&&y){console.log("[PAGE] Playing remote audio track");const o=new MediaStream([y]);s.current.srcObject=o,s.current.play().catch(c=>console.error("[PAGE] Remote audio play failed:",c))}},[y]);const U=()=>{u&&(g?u.muteAudio():u.unmuteAudio(),T(!g))},B=()=>{u&&(v?u.pauseVideo():u.resumeVideo(),I(!v))},F=async o=>{try{const h=(await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:o}}})).getVideoTracks()[0];if(u&&await u.replaceVideoTrack(h),n){const d=n.getVideoTracks()[0];d&&(n.removeTrack(d),d.stop()),n.addTrack(h),k.current&&(k.current.srcObject=n)}D(o),I(!0)}catch(c){console.error("[PAGE] Failed to switch camera:",c)}},H=async o=>{try{const h=(await navigator.mediaDevices.getUserMedia({audio:{deviceId:{exact:o}}})).getAudioTracks()[0];if(u&&await u.replaceAudioTrack(h),n){const d=n.getAudioTracks()[0];d&&(n.removeTrack(d),d.stop()),n.addTrack(h)}M(o),T(!0)}catch(c){console.error("[PAGE] Failed to switch microphone:",c)}},z=()=>{confirm("Are you sure you want to end the stream?")&&(u&&u.close(),n&&n.getTracks().forEach(o=>o.stop()),r(!1),j(!0))};if(x)return e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100 p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"w-full max-w-md rounded-xl bg-white p-8 text-center shadow-xl dark:bg-gray-800",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-red-100 dark:bg-red-900",children:e.jsx("svg",{className:"h-8 w-8 text-red-600 dark:text-red-200",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"mb-2 text-2xl font-bold text-gray-900 dark:text-white",children:"Stream Ended"}),e.jsx("p",{className:"mb-6 text-gray-500 dark:text-gray-400",children:"The streaming session has been terminated."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"rounded-lg bg-blue-600 px-6 py-2 font-medium text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none dark:focus:ring-offset-gray-800",children:"Start New Stream"})]})});if(!p)return e.jsx(Q,{onReady:G});const J=async o=>{try{s.current&&"setSinkId"in s.current?(await s.current.setSinkId(o),O(o)):console.warn("Audio output selection not supported")}catch(c){console.error("Failed to set audio output device:",c)}};return e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100 p-6 dark:bg-gray-900",children:e.jsxs("div",{className:"w-full max-w-2xl overflow-hidden rounded-xl bg-white shadow-xl dark:bg-gray-800",children:[e.jsx("div",{className:"border-b border-gray-200 p-4 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Client Streaming"}),e.jsxs("div",{className:"flex items-center gap-2",children:[t?e.jsxs("span",{className:"inline-flex items-center rounded-full bg-red-100 px-2.5 py-0.5 text-xs font-medium text-red-800 dark:bg-red-900 dark:text-red-200",children:[e.jsx("span",{className:"mr-1.5 h-2 w-2 rounded-full bg-red-600"}),"LIVE"]}):e.jsx("span",{className:"inline-flex items-center rounded-full bg-yellow-100 px-2.5 py-0.5 text-xs font-medium text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",children:"CONNECTING"}),e.jsxs("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-2.5 py-0.5 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:[a," Viewers"]})]})]})}),e.jsxs("div",{className:"group relative aspect-video bg-black",children:[e.jsx("video",{ref:k,autoPlay:!0,muted:!0,playsInline:!0,className:`h-full w-full object-cover ${v?"":"opacity-50"}`}),!v&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400",children:"Camera Paused"}),e.jsx("audio",{ref:s,autoPlay:!0}),y&&e.jsxs("div",{className:"absolute top-4 right-4 flex animate-pulse items-center gap-2 rounded-full bg-red-600 px-3 py-1 text-white shadow-lg",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})}),e.jsx("span",{className:"text-xs font-bold",children:"Admin Speaking"})]}),e.jsxs("div",{className:"absolute right-0 bottom-0 left-0 flex justify-center gap-4 bg-gradient-to-t from-black/80 to-transparent p-4 opacity-0 transition-opacity group-hover:opacity-100",children:[e.jsx("button",{onClick:U,className:`rounded-full p-3 ${g?"bg-white/20 text-white hover:bg-white/30":"bg-red-500 text-white hover:bg-red-600"} backdrop-blur-sm transition-colors`,title:g?"Mute Mic":"Unmute Mic",children:g?e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}):e.jsxs("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"})]})}),n?.getAudioTracks()[0]&&e.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-black/50 px-3 py-2 backdrop-blur-sm",children:[e.jsx("span",{className:"text-xs text-white",children:"Mic Level:"}),e.jsx(K,{track:n.getAudioTracks()[0]})]}),e.jsx("button",{onClick:B,className:`rounded-full p-3 ${v?"bg-white/20 text-white hover:bg-white/30":"bg-red-500 text-white hover:bg-red-600"} backdrop-blur-sm transition-colors`,title:v?"Turn Off Camera":"Turn On Camera",children:v?e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}):e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})})})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-4 flex flex-wrap gap-4",children:[e.jsxs("div",{className:"min-w-[200px] flex-1",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Camera"}),e.jsx("select",{value:A,onChange:o=>F(o.target.value),className:"w-full rounded-lg border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",children:C.map(o=>e.jsx("option",{value:o.deviceId,children:o.label||`Camera ${o.deviceId.slice(0,5)}...`},o.deviceId))})]}),e.jsxs("div",{className:"min-w-[200px] flex-1",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Microphone"}),e.jsx("select",{value:R,onChange:o=>H(o.target.value),className:"w-full rounded-lg border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",children:b.map(o=>e.jsx("option",{value:o.deviceId,children:o.label||`Mic ${o.deviceId.slice(0,5)}...`},o.deviceId))})]}),P.length>0&&e.jsxs("div",{className:"min-w-[200px] flex-1",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Speaker"}),e.jsx("select",{className:"w-full rounded-lg border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",value:V,onChange:o=>J(o.target.value),children:P.map(o=>e.jsx("option",{value:o.deviceId,children:o.label||`Speaker ${o.deviceId.slice(0,5)}...`},o.deviceId))})]})]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 pt-4 dark:border-gray-700",children:[e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Share your stream ID:"," ",e.jsx("code",{className:"rounded bg-gray-100 px-1 py-0.5 font-mono text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:localStorage.getItem("stream_room_id")})]}),e.jsx("button",{onClick:z,className:"rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:outline-none dark:focus:ring-offset-gray-800",children:"End Stream"})]})]})]})})}export{re as default};
